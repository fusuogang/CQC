<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<meta name="baidu-tc-verification" content="0fb041a64ee71333c957d8c784961cc8" />
<meta property="qc:admins" content="145637425211673116375" />
<meta http-equiv="X-UA-Compatible" content="IE=10,IE=9,IE=8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<title>Python爬虫实战一之爬取糗事百科段子 | 静觅</title>
<script>
window._deel = {name: '静觅',url: 'http://cuiqingcai.com/wp-content/themes/Yusi', ajaxpager: 'on', commenton: 1, roll: [0,0]}
</script>

<!-- All in One SEO Pack 2.2.7.5 by Michael Torbert of Semper Fi Web Design[392,430] -->
<meta name="description" itemprop="description" content="大家好，前面入门已经说了那么多基础知识了，下面我们做几个实战项目来挑战一下吧。那么这次为大家带来，Python爬取糗事百科的小段子的例子。 首先，糗事百科大家都听说过吧？糗友们发的搞笑的段子一抓一大把，这次我们尝试一下用爬虫把他们抓取下来。 友情提示 糗事百科在前一段时间进行了改版，导致之前的代码没法用了，会" />

<meta name="keywords" itemprop="keywords" content="python,爬虫" />

<!-- /all in one seo pack -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/cuiqingcai.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.5"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-github-css'  href='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/themes/github/github.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='page-list-style-css'  href='http://cuiqingcai.com/wp-content/plugins/sitemap/css/page-list.css?ver=4.3' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='http://cuiqingcai.com/wp-content/themes/Yusi/style.css?ver=33' type='text/css' media='all' />
<script type='text/javascript' src='//libs.baidu.com/jquery/1.8.3/jquery.min.js?ver=1.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.7.1","is_admin":"0","ajaxurl":"http:\/\/cuiqingcai.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.7.1'></script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/themes/Yusi/js/jquery.fitvids.js?ver=2.0.110526'></script>
<link rel='prev' title='Python爬虫入门七之正则表达式' href='http://cuiqingcai.com/977.html' />
<link rel='next' title='Python爬虫实战二之爬取百度贴吧帖子' href='http://cuiqingcai.com/993.html' />
<link rel='canonical' href='http://cuiqingcai.com/990.html' />
<link rel='shortlink' href='http://cuiqingcai.com/?p=990' />
<meta name="keywords" content="Python, 爬虫, Python">
<meta name="description" content="大家好，前面入门已经说了那么多基础知识了，下面我们做几个实战项目来挑战一下吧。那么这次为大家带来，Python爬取糗事百科的小段子的例子。  首先，糗事百科大家都听说过吧？糗友们发的搞笑的段子一抓一大把，这次我们尝试一下用爬虫把他们抓取下来。 友情提示 糗事百科在前一段时间进行了改版，导致之前的代码没法用了，会导致无法输出和CPU占用过高的情况，是因为正则表达式没有匹配到的缘故。  现在，博主已经对程序进行了重新修改，代码亲测可用，包括">
        <script type="text/javascript">
            jQuery(document).ready( function() {
                jQuery('.video').fitVids();
            });
        </script><!--[if lt IE 9]><script src="http://cuiqingcai.com/wp-content/themes/Yusi/js/html5.js"></script><![endif]-->

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3ef185224776ec2561c9f7066ead4f24";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta name="360-site-verification" content="bdc579accc68a98f1258ebcce2266afa" />
<script type="text/javascript" name="baidu-tc-cerfication" data-appid="5411405" src="http://apps.bdimg.com/cloudaapi/lightapp.js"></script>
<link rel="shortcut icon" type="image/x-icon" href="http://cuiqingcai.com/fav.png" />
<script type="text/javascript" src="http://cuiqingcai.com/wp-content/themes/Yusi/js/main.js"></script>
<script type="text/javascript">

</script>
</head>
<body class="single single-post postid-990 single-format-standard">

<header id="header" class="header">
<div class="container-inner">
 <div class="yusi-logo">
                    <a href="/">
                        <h1>
                                                        <span class="yusi-mono">静觅</span>
                                                        <span class="yusi-bloger">静静寻觅生活的美好</span>
                                                    </h1>
                    </a>
    </div>
</div>

	<div id="nav-header" class="navbar">
		
		<ul class="nav">
			<li id="menu-item-44" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-44"><a href="http://cuiqingcai.com">首页</a></li>
<li id="menu-item-14" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-14"><a href="http://cuiqingcai.com/category/life">生活笔记</a>
<ul class="sub-menu">
	<li id="menu-item-19" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-19"><a href="http://cuiqingcai.com/category/life/notes">个人随笔</a></li>
	<li id="menu-item-18" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-18"><a href="http://cuiqingcai.com/category/life/daily">个人日记</a></li>
	<li id="menu-item-15" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-15"><a href="http://cuiqingcai.com/category/life/presatation">个人展示</a></li>
</ul>
</li>
<li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-7"><a href="http://cuiqingcai.com/category/technique">技术杂谈</a>
<ul class="sub-menu">
	<li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9"><a href="http://cuiqingcai.com/category/technique/cc">C/C++</a></li>
	<li id="menu-item-11" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-11"><a href="http://cuiqingcai.com/category/technique/java">Java</a></li>
	<li id="menu-item-17" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-17"><a href="http://cuiqingcai.com/category/technique/php">PHP</a></li>
	<li id="menu-item-153" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-153"><a href="http://cuiqingcai.com/category/technique/html">HTML</a></li>
	<li id="menu-item-960" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-960"><a href="http://cuiqingcai.com/category/technique/python">Python</a></li>
	<li id="menu-item-1277" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1277"><a href="http://cuiqingcai.com/category/technique/javascript">JS</a></li>
	<li id="menu-item-16" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16"><a href="http://cuiqingcai.com/category/technique/other">Other</a></li>
</ul>
</li>
<li id="menu-item-418" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-418"><a href="http://cuiqingcai.com/category/resources">福利专区</a></li>
<li id="menu-item-851" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-851"><a href="http://cuiqingcai.com/about">关于自己</a></li>
<li id="menu-item-251" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-251"><a href="http://cuiqingcai.com/contact">给我留言</a></li>
<li id="menu-item-1131" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1131"><a href="http://cuiqingcai.com/donate">赞助作者</a></li>
<li style="float:right;">
                    <div class="toggle-search"><i class="fa fa-search"></i></div>
<div class="search-expand" style="display: none;"><div class="search-expand-inner"><form method="get" class="searchform themeform" onsubmit="location.href='http://cuiqingcai.com/?s=' + encodeURIComponent(this.s.value).replace(/%20/g, '+'); return false;" action="/"><div> <input type="ext" class="search" name="s" onblur="if(this.value=='')this.value='search...';" onfocus="if(this.value=='search...')this.value='';" value="search..."></div></form></div></div>
</li>
		</ul>
	</div>
	</div>
</header>
<section class="container"><div class="speedbar">
					<div class="pull-right">
				<i class="fa fa-user"></i> <a href="/wp-login.php?action=register">投稿</a>&nbsp;&nbsp;&nbsp;   <i class="fa fa-power-off"></i> <a href="http://cuiqingcai.com/wp-login.php">登录</a>			</div>
				<div class="toptip"><strong class="text-success"><i class="fa fa-volume-up"></i> </strong>    欢迎来到我的博客，浏览文章时点击一下广告是您对我最大的支持，谢谢啦！</div>
	</div>
	<div class="content-wrap">
	<div class="content">
<div class="breadcrumbs"><a title="返回首页" href="http://cuiqingcai.com"><i class="fa fa-home"></i></a> <small>></small> <a href="http://cuiqingcai.com/category/technique">技术杂谈</a> <small>></small> <a href="http://cuiqingcai.com/category/technique/python">Python</a> <small>></small> <span class="muted">Python爬虫实战一之爬取糗事百科段子</span></div>
				<header class="article-header">
			<h1 class="article-title"><a href="http://cuiqingcai.com/990.html">Python爬虫实战一之爬取糗事百科段子</a></h1>
			<div class="meta">
				<span id="mute-category" class="muted"><i class="fa fa-list-alt"></i><a href="http://cuiqingcai.com/category/technique/python"> Python</a></span>				<span class="muted"><i class="fa fa-user"></i> <a href="http://cuiqingcai.com/author/cqcre">崔庆才</a></span>
				<time class="muted"><i class="fa fa-clock-o"></i> 12个月前 (02-16)</time>
				<span class="muted"><i class="fa fa-eye"></i> 54655℃</span>
				<span class="muted"><i class="fa fa-comments-o"></i> <a href="http://cuiqingcai.com/990.html#comments">177评论</a></span>							</div>
		</header>
<div class="banner banner-post"><!-- tuici -->
<script type="text/javascript">
    /* 创建于 2015-02-23*/
var cpro_id = "u1959022";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/cnw.js" type="text/javascript"></script>
<!-- biaoqian -->
<script type="text/javascript">
    /*860*60 创建于 2015-02-25*/
    var cpro_id = "u1959939";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>

</div>		<article class="article-content">
			<p>大家好，前面入门已经说了那么多基础知识了，下面我们做几个实战项目来挑战一下吧。那么这次为大家带来，Python爬取糗事百科的小段子的例子。</p>
<p>首先，糗事百科大家都听说过吧？糗友们发的搞笑的段子一抓一大把，这次我们尝试一下用爬虫把他们抓取下来。</p>
<h2>友情提示</h2>
<p>糗事百科在前一段时间进行了改版，导致之前的代码没法用了，会导致无法输出和CPU占用过高的情况，是因为正则表达式没有匹配到的缘故。</p>
<p>现在，博主已经对程序进行了重新修改，代码亲测可用，包括截图和说明，之前一直在忙所以没有及时更新，望大家海涵！</p>
<p>更新时间：2015/8/2</p>
<h2>本篇目标</h2>
<blockquote><p>1.抓取糗事百科热门段子</p>
<p>2.过滤带有图片的段子</p>
<p>3.实现每按一次回车显示一个段子的发布时间，发布人，段子内容，点赞数。</p></blockquote>
<p>糗事百科是不需要登录的，所以也没必要用到Cookie，另外糗事百科有的段子是附图的，我们把图抓下来图片不便于显示，那么我们就尝试过滤掉有图的段子吧。</p>
<p>好，现在我们尝试抓取一下糗事百科的热门段子吧，每按下一次回车我们显示一个段子。</p>
<h2>1.确定URL并抓取页面代码</h2>
<p>首先我们确定好页面的URL是 http://www.qiushibaike.com/hot/page/1，其中最后一个数字1代表页数，我们可以传入不同的值来获得某一页的段子内容。</p>
<p>我们初步构建如下的代码来打印页面代码内容试试看，先构造最基本的页面抓取方式，看看会不会成功</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537ae160544483" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# -*- coding:utf-8 -*-
import urllib
import urllib2


page = 1
url = 'http://www.qiushibaike.com/hot/page/' + str(page)
try:
    request = urllib2.Request(url)
    response = urllib2.urlopen(request)
    print response.read()
except urllib2.URLError, e:
    if hasattr(e,"code"):
        print e.code
    if hasattr(e,"reason"):
        print e.reason</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537ae160544483-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-2">2</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-4">4</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-6">6</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-8">8</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-10">10</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-12">12</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-14">14</div><div class="crayon-num" data-line="crayon-56bca533537ae160544483-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537ae160544483-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537ae160544483-1"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-2"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-56bca533537ae160544483-3"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-4">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537ae160544483-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-6"><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-56bca533537ae160544483-7"><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://www.qiushibaike.com/hot/page/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-8"><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537ae160544483-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537ae160544483-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-12"><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">URLError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537ae160544483-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"code"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">code</span></div><div class="crayon-line" id="crayon-56bca533537ae160544483-15"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"reason"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537ae160544483-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-v">reason</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0026 seconds] -->
<p>运行程序，哦不，它竟然报错了，真是时运不济，命途多舛啊</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537bd532026078" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
line 373, in _read_status
 raise BadStatusLine(line)
httplib.BadStatusLine: ''</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537bd532026078-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537bd532026078-2">2</div><div class="crayon-num" data-line="crayon-56bca533537bd532026078-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537bd532026078-1"><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">373</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">_read_status</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537bd532026078-2"><span class="crayon-e"> </span><span class="crayon-e">raise </span><span class="crayon-e">BadStatusLine</span><span class="crayon-sy">(</span><span class="crayon-v">line</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537bd532026078-3"><span class="crayon-v">httplib</span><span class="crayon-sy">.</span><span class="crayon-v">BadStatusLine</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">''</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>好吧，应该是headers验证的问题，我们加上一个headers验证试试看吧，将代码修改如下</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537c4100038835" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# -*- coding:utf-8 -*-
import urllib
import urllib2

page = 1
url = 'http://www.qiushibaike.com/hot/page/' + str(page)
user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
headers = { 'User-Agent' : user_agent }
try:
    request = urllib2.Request(url,headers = headers)
    response = urllib2.urlopen(request)
    print response.read()
except urllib2.URLError, e:
    if hasattr(e,"code"):
        print e.code
    if hasattr(e,"reason"):
        print e.reason</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537c4100038835-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-2">2</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-4">4</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-6">6</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-8">8</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-10">10</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-12">12</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-14">14</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537c4100038835-16">16</div><div class="crayon-num" data-line="crayon-56bca533537c4100038835-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537c4100038835-1"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-2"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-3"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-4">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537c4100038835-5"><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-6"><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://www.qiushibaike.com/hot/page/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-7"><span class="crayon-v">user_agent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-8"><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">_</span>agent<span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-9"><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">,</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">headers</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-13"><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">URLError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"code"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">code</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537c4100038835-16"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"reason"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537c4100038835-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-v">reason</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0034 seconds] -->
<p>嘿嘿，这次运行终于正常了，打印出了第一页的HTML代码，大家可以运行下代码试试看。在这里运行结果太长就不贴了。</p>
<h2>2.提取某一页的所有段子</h2>
<p>好，获取了HTML代码之后，我们开始分析怎样获取某一页的所有段子。</p>
<p>首先我们审查元素看一下，按浏览器的F12，截图如下</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150802154147.jpg"><img class="alignnone size-full wp-image-1962" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150802154147.jpg" alt="20150802154147" width="1045" height="628" /></a></p>
<p>&nbsp;</p>
<p>我们可以看到，每一个段子都是&lt;div class=&#8221;article block untagged mb15&#8243; id=&#8221;&#8230;&#8221;&gt;&#8230;&lt;/div&gt;包裹的内容。</p>
<p>现在我们想获取发布人，发布日期，段子内容，以及点赞的个数。不过另外注意的是，段子有些是带图片的，如果我们想在控制台显示图片是不现实的，所以我们直接把带有图片的段子给它剔除掉，只保存仅含文本的段子。</p>
<p>所以我们加入如下正则表达式来匹配一下，用到的方法是 re.findall 是找寻所有匹配的内容。方法的用法详情可以看前面说的正则表达式的介绍。</p>
<p>好，我们的正则表达式匹配语句书写如下，在原来的基础上追加如下代码</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537cb800535007" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
content = response.read().decode('utf-8')
pattern = re.compile('&lt;div.*?author"&gt;.*?&lt;a.*?&lt;img.*?&gt;(.*?)&lt;/a&gt;.*?&lt;div.*?'+
                         'content"&gt;(.*?)&lt;!--(.*?)--&gt;.*?&lt;/div&gt;(.*?)&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;',re.S)
items = re.findall(pattern,content)
for item in items:
    print item[0],item[1],item[2],item[3],item[4]</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537cb800535007-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537cb800535007-2">2</div><div class="crayon-num" data-line="crayon-56bca533537cb800535007-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537cb800535007-4">4</div><div class="crayon-num" data-line="crayon-56bca533537cb800535007-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537cb800535007-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537cb800535007-1"><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'utf-8'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537cb800535007-2"><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;div.*?author"&gt;.*?&lt;a.*?&lt;img.*?&gt;(.*?)&lt;/a&gt;.*?&lt;div.*?'</span><span class="crayon-o">+</span></div><div class="crayon-line" id="crayon-56bca533537cb800535007-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'content"&gt;(.*?)&lt;!--(.*?)--&gt;.*?&lt;/div&gt;(.*?)&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537cb800535007-4"><span class="crayon-v">items</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537cb800535007-5"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">items</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537cb800535007-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p>现在正则表达式在这里稍作说明</p>
<p>1）.*? 是一个固定的搭配，.和*代表可以匹配任意无限多个字符，加上？表示使用非贪婪模式进行匹配，也就是我们会尽可能短地做匹配，以后我们还会大量用到 .*? 的搭配。</p>
<p>2）(.*?)代表一个分组，在这个正则表达式中我们匹配了五个分组，在后面的遍历item中，item[0]就代表第一个(.*?)所指代的内容，item[1]就代表第二个(.*?)所指代的内容，以此类推。</p>
<p>3）re.S 标志代表在匹配时为点任意匹配模式，点 . 也可以代表换行符。</p>
<p>这样我们就获取了发布人，发布时间，发布内容，附加图片以及点赞数。</p>
<p>在这里注意一下，我们要获取的内容如果是带有图片，直接输出出来比较繁琐，所以这里我们只获取不带图片的段子就好了。</p>
<p>所以，在这里我们就需要对带图片的段子进行过滤。</p>
<p>我们可以发现，带有图片的段子会带有类似下面的代码，而不带图片的则没有，所以，我们的正则表达式的item[3]就是获取了下面的内容，如果不带图片，item[3]获取的内容便是空。</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537d3633086774" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;div class="thumb"&gt;

&lt;a href="/article/112061287?list=hot&amp;amp;s=4794990" target="_blank"&gt;
&lt;img src="http://pic.qiushibaike.com/system/pictures/11206/112061287/medium/app112061287.jpg" alt="但他们依然乐观"&gt;
&lt;/a&gt;

&lt;/div&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537d3633086774-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537d3633086774-2">2</div><div class="crayon-num" data-line="crayon-56bca533537d3633086774-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537d3633086774-4">4</div><div class="crayon-num" data-line="crayon-56bca533537d3633086774-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537d3633086774-6">6</div><div class="crayon-num" data-line="crayon-56bca533537d3633086774-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537d3633086774-1"><span class="crayon-o">&lt;</span><span class="crayon-e">div </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"thumb"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537d3633086774-2">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537d3633086774-3"><span class="crayon-o">&lt;</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-v">href</span><span class="crayon-o">=</span><span class="crayon-s">"/article/112061287?list=hot&amp;amp;s=4794990"</span><span class="crayon-h"> </span><span class="crayon-v">target</span><span class="crayon-o">=</span><span class="crayon-s">"_blank"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537d3633086774-4"><span class="crayon-o">&lt;</span><span class="crayon-e">img </span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"http://pic.qiushibaike.com/system/pictures/11206/112061287/medium/app112061287.jpg"</span><span class="crayon-h"> </span><span class="crayon-v">alt</span><span class="crayon-o">=</span><span class="crayon-s">"但他们依然乐观"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-56bca533537d3633086774-5"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">a</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537d3633086774-6">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537d3633086774-7"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">div</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>所以我们只需要判断item[3]中是否含有img标签就可以了。</p>
<p>好，我们再把上述代码中的for循环改为下面的样子</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537d9441572906" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
for item in items:
        haveImg = re.search("img",item[3])
        if not haveImg:
            print item[0],item[1],item[2],item[4]</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537d9441572906-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537d9441572906-2">2</div><div class="crayon-num" data-line="crayon-56bca533537d9441572906-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537d9441572906-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537d9441572906-1"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">items</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537d9441572906-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">haveImg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-s">"img"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537d9441572906-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">haveImg</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537d9441572906-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0017 seconds] -->
<p>现在，整体的代码如下</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537df263223906" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# -*- coding:utf-8 -*-
import urllib
import urllib2
import re

page = 1
url = 'http://www.qiushibaike.com/hot/page/' + str(page)
user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
headers = { 'User-Agent' : user_agent }
try:
    request = urllib2.Request(url,headers = headers)
    response = urllib2.urlopen(request)
    content = response.read().decode('utf-8')
    pattern = re.compile('&lt;div.*?author"&gt;.*?&lt;a.*?&lt;img.*?&gt;(.*?)&lt;/a&gt;.*?&lt;div.*?'+
                         'content"&gt;(.*?)&lt;!--(.*?)--&gt;.*?&lt;/div&gt;(.*?)&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;',re.S)
    items = re.findall(pattern,content)
    for item in items:
        haveImg = re.search("img",item[3])
        if not haveImg:
            print item[0],item[1],item[2],item[4]
except urllib2.URLError, e:
    if hasattr(e,"code"):
        print e.code
    if hasattr(e,"reason"):
        print e.reason</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537df263223906-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-2">2</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-4">4</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-6">6</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-8">8</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-10">10</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-12">12</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-14">14</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-16">16</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-18">18</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-20">20</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-22">22</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537df263223906-24">24</div><div class="crayon-num" data-line="crayon-56bca533537df263223906-25">25</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537df263223906-1"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-2"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-3"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-4"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-6"><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-7"><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://www.qiushibaike.com/hot/page/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-8"><span class="crayon-v">user_agent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-9"><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">user</span><span class="crayon-sy">_</span>agent<span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-10"><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">,</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">headers</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'utf-8'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;div.*?author"&gt;.*?&lt;a.*?&lt;img.*?&gt;(.*?)&lt;/a&gt;.*?&lt;div.*?'</span><span class="crayon-o">+</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'content"&gt;(.*?)&lt;!--(.*?)--&gt;.*?&lt;/div&gt;(.*?)&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">items</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">items</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">haveImg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-s">"img"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">haveImg</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-21"><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">URLError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"code"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">code</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537df263223906-24"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"reason"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537df263223906-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-v">reason</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0055 seconds] -->
<p>运行一下看下效果</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150802154832.jpg"><img class="alignnone size-full wp-image-1963" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150802154832.jpg" alt="20150802154832" width="1023" height="564" /></a></p>
<p>恩，带有图片的段子已经被剔除啦。是不是很开森？</p>
<h2>3.完善交互，设计面向对象模式</h2>
<p>好啦，现在最核心的部分我们已经完成啦，剩下的就是修一下边边角角的东西，我们想达到的目的是：</p>
<p>按下回车，读取一个段子，显示出段子的发布人，发布日期，内容以及点赞个数。</p>
<p>另外我们需要设计面向对象模式，引入类和方法，将代码做一下优化和封装，最后，我们的代码如下所示</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-56bca533537e6579418090" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-
import urllib
import urllib2
import re
import thread
import time

#糗事百科爬虫类
class QSBK:

    #初始化方法，定义一些变量
    def __init__(self):
        self.pageIndex = 1
        self.user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
        #初始化headers
        self.headers = { 'User-Agent' : self.user_agent }
        #存放段子的变量，每一个元素是每一页的段子们
        self.stories = []
        #存放程序是否继续运行的变量
        self.enable = False
    #传入某一页的索引获得页面代码
    def getPage(self,pageIndex):
        try:
            url = 'http://www.qiushibaike.com/hot/page/' + str(pageIndex)
            #构建请求的request
            request = urllib2.Request(url,headers = self.headers)
            #利用urlopen获取页面代码
            response = urllib2.urlopen(request)
            #将页面转化为UTF-8编码
            pageCode = response.read().decode('utf-8')
            return pageCode

        except urllib2.URLError, e:
            if hasattr(e,"reason"):
                print u"连接糗事百科失败,错误原因",e.reason
                return None


    #传入某一页代码，返回本页不带图片的段子列表
    def getPageItems(self,pageIndex):
        pageCode = self.getPage(pageIndex)
        if not pageCode:
            print "页面加载失败...."
            return None
        pattern = re.compile('&lt;div.*?author"&gt;.*?&lt;a.*?&lt;img.*?&gt;(.*?)&lt;/a&gt;.*?&lt;div.*?'+
                         'content"&gt;(.*?)&lt;!--(.*?)--&gt;.*?&lt;/div&gt;(.*?)&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;',re.S)
        items = re.findall(pattern,pageCode)
        #用来存储每页的段子们
        pageStories = []
        #遍历正则表达式匹配的信息
        for item in items:
            #是否含有图片
            haveImg = re.search("img",item[3])
            #如果不含有图片，把它加入list中
            if not haveImg:
                replaceBR = re.compile('&lt;br/&gt;')
                text = re.sub(replaceBR,"\n",item[1])
                #item[0]是一个段子的发布者，item[1]是内容，item[2]是发布时间,item[4]是点赞数
                pageStories.append([item[0].strip(),text.strip(),item[2].strip(),item[4].strip()])
        return pageStories

    #加载并提取页面的内容，加入到列表中
    def loadPage(self):
        #如果当前未看的页数少于2页，则加载新一页
        if self.enable == True:
            if len(self.stories) &lt; 2:
                #获取新一页
                pageStories = self.getPageItems(self.pageIndex)
                #将该页的段子存放到全局list中
                if pageStories:
                    self.stories.append(pageStories)
                    #获取完之后页码索引加一，表示下次读取下一页
                    self.pageIndex += 1
    
    #调用该方法，每次敲回车打印输出一个段子
    def getOneStory(self,pageStories,page):
        #遍历一页的段子
        for story in pageStories:
            #等待用户输入
            input = raw_input()
            #每当输入回车一次，判断一下是否要加载新页面
            self.loadPage()
            #如果输入Q则程序结束
            if input == "Q":
                self.enable = False
                return
            print u"第%d页\t发布人:%s\t发布时间:%s\t赞:%s\n%s" %(page,story[0],story[2],story[3],story[1])
    
    #开始方法
    def start(self):
        print u"正在读取糗事百科,按回车查看新段子，Q退出"
        #使变量为True，程序可以正常运行
        self.enable = True
        #先加载一页内容
        self.loadPage()
        #局部变量，控制当前读到了第几页
        nowPage = 0
        while self.enable:
            if len(self.stories)&gt;0:
                #从全局list中获取一页的段子
                pageStories = self.stories[0]
                #当前读到的页数加一
                nowPage += 1
                #将全局list中第一个元素删除，因为已经取出
                del self.stories[0]
                #输出该页的段子
                self.getOneStory(pageStories,nowPage)


spider = QSBK()
spider.start()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56bca533537e6579418090-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-2">2</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-4">4</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-6">6</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-8">8</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-10">10</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-12">12</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-14">14</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-16">16</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-18">18</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-20">20</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-22">22</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-24">24</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-26">26</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-28">28</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-30">30</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-32">32</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-34">34</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-36">36</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-38">38</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-40">40</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-42">42</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-44">44</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-46">46</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-48">48</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-50">50</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-52">52</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-54">54</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-56">56</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-58">58</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-60">60</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-62">62</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-64">64</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-66">66</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-68">68</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-70">70</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-72">72</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-74">74</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-76">76</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-78">78</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-80">80</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-82">82</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-84">84</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-86">86</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-88">88</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-90">90</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-92">92</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-94">94</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-96">96</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-98">98</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-100">100</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-102">102</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-104">104</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-106">106</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-108">108</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-110">110</div><div class="crayon-num" data-line="crayon-56bca533537e6579418090-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-56bca533537e6579418090-112">112</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56bca533537e6579418090-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-3"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-4"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-5"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-6"><span class="crayon-e">import </span><span class="crayon-e">thread</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-7"><span class="crayon-e">import </span><span class="crayon-v">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-8">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537e6579418090-9"><span class="crayon-p">#糗事百科爬虫类</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-10"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">QSBK</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法，定义一些变量</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">pageIndex</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">user_agent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化headers</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">user</span><span class="crayon-sy">_</span>agent<span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#存放段子的变量，每一个元素是每一页的段子们</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">stories</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#存放程序是否继续运行的变量</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">enable</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#传入某一页的索引获得页面代码</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getPage</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://www.qiushibaike.com/hot/page/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#构建请求的request</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">,</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">headers</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#利用urlopen获取页面代码</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将页面转化为UTF-8编码</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'utf-8'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">pageCode</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-33">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-34"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">URLError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">hasattr</span><span class="crayon-sy">(</span><span class="crayon-v">e</span><span class="crayon-sy">,</span><span class="crayon-s">"reason"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"连接糗事百科失败,错误原因"</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">reason</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-37"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-38">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537e6579418090-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#传入某一页代码，返回本页不带图片的段子列表</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getPageItems</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getPage</span><span class="crayon-sy">(</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">pageCode</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"页面加载失败...."</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-46"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;div.*?author"&gt;.*?&lt;a.*?&lt;img.*?&gt;(.*?)&lt;/a&gt;.*?&lt;div.*?'</span><span class="crayon-o">+</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-s">'content"&gt;(.*?)&lt;!--(.*?)--&gt;.*?&lt;/div&gt;(.*?)&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">items</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">pageCode</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用来存储每页的段子们</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageStories</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#遍历正则表达式匹配的信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">items</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否含有图片</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">haveImg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-s">"img"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果不含有图片，把它加入list中</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">haveImg</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">replaceBR</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;br/&gt;'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">text</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">sub</span><span class="crayon-sy">(</span><span class="crayon-v">replaceBR</span><span class="crayon-sy">,</span><span class="crayon-s">"\n"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#item[0]是一个段子的发布者，item[1]是内容，item[2]是发布时间,item[4]是点赞数</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageStories</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-v">text</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">pageStories</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-62">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537e6579418090-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#加载并提取页面的内容，加入到列表中</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loadPage</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果当前未看的页数少于2页，则加载新一页</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">enable</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">stories</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取新一页</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageStories</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getPageItems</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将该页的段子存放到全局list中</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">pageStories</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">stories</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">pageStories</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取完之后页码索引加一，表示下次读取下一页</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">pageIndex</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#调用该方法，每次敲回车打印输出一个段子</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getOneStory</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageStories</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#遍历一页的段子</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">story </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">pageStories</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#等待用户输入</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">input</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">raw_input</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#每当输入回车一次，判断一下是否要加载新页面</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loadPage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果输入Q则程序结束</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">input</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"Q"</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">enable</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"第%d页\t发布人:%s\t发布时间:%s\t赞:%s\n%s"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">,</span><span class="crayon-v">story</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">story</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">story</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-v">story</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#开始方法</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"正在读取糗事百科,按回车查看新段子，Q退出"</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#使变量为True，程序可以正常运行</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">enable</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#先加载一页内容</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loadPage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#局部变量，控制当前读到了第几页</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">nowPage</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">enable</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">stories</span><span class="crayon-sy">)</span><span class="crayon-o">&gt;</span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#从全局list中获取一页的段子</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageStories</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">stories</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#当前读到的页数加一</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">nowPage</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将全局list中第一个元素删除，因为已经取出</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">del </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">stories</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#输出该页的段子</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getOneStory</span><span class="crayon-sy">(</span><span class="crayon-v">pageStories</span><span class="crayon-sy">,</span><span class="crayon-v">nowPage</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56bca533537e6579418090-109">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-110">&nbsp;</div><div class="crayon-line" id="crayon-56bca533537e6579418090-111"><span class="crayon-v">spider</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">QSBK</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56bca533537e6579418090-112"><span class="crayon-v">spider</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0179 seconds] -->
<p>好啦，大家来测试一下吧，点一下回车会输出一个段子，包括发布人，发布时间，段子内容以及点赞数，是不是感觉爽爆了！</p>
<p>我们第一个爬虫实战项目介绍到这里，欢迎大家继续关注，小伙伴们加油！</p>
<p>转载请注明：<a href="http://cuiqingcai.com">静觅</a> &raquo; <a href="http://cuiqingcai.com/990.html">Python爬虫实战一之爬取糗事百科段子</a></p>

      
<div class="article-social">
			<a href="javascript:;" data-action="ding" data-id="990" id="Addlike" class="action"><i class="fa fa-heart-o"></i>喜欢 (<span class="count">245</span>)</a><span class="or">or</span><span class="action action-share bdsharebuttonbox"><i class="fa fa-share-alt"></i>分享 (<span class="bds_count" data-cmd="count" title="累计分享0次">0</span>)<div class="action-popover"><div class="popover top in"><div class="arrow"></div><div class="popover-content"><a href="#" class="sinaweibo fa fa-weibo" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone fa fa-star" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="tencentweibo fa fa-tencent-weibo" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="qq fa fa-qq" data-cmd="sqq" title="分享到QQ好友"></a><a href="#" class="bds_renren fa fa-renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin fa fa-weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_more fa fa-ellipsis-h" data-cmd="more"></a></div></div></div></span>	
</div>
	</article>	
				<div style="background:#fff;padding-bottom:20px;font-size:14px;">
			<p style="text-align: center;margin-bottom:20px;padding:0px 20px">您的支持是博主写作最大的动力，如果您喜欢我的文章，感觉我的文章对您有帮助，请狠狠点击下面的</p>
			<p style="text-align: center;"><a href="http://cuiqingcai.com/donate"> <input style="width: 310px; margin: 10px auto 0px; background-color: #f58a87; color: #ffffff; height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" type="button" value="我要小额赞助" /></a>
		</div>
		<footer class="article-footer">
			<div class="article-tags"><i class="fa fa-tags"></i><a href="http://cuiqingcai.com/tag/python" rel="tag">Python</a><a href="http://cuiqingcai.com/tag/%e7%88%ac%e8%99%ab" rel="tag">爬虫</a></div>		</footer>
	<nav class="article-nav">
			<span class="article-nav-prev"><i class="fa fa-angle-double-left"></i> <a href="http://cuiqingcai.com/977.html" rel="prev">Python爬虫入门七之正则表达式</a></span>
			<span class="article-nav-next"><a href="http://cuiqingcai.com/993.html" rel="next">Python爬虫实战二之爬取百度贴吧帖子</a>  <i class="fa fa-angle-double-right"></i></span>
		</nav>

		<div class="related_top">
			<div class="related_posts"><ul class="related_img">

		<li class="related_box"  >
		<a href="http://cuiqingcai.com/2443.html" title="Python爬虫进阶二之PySpider框架安装配置" target="_blank">
<img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2016/02/background.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="Python爬虫进阶二之PySpider框架安装配置" />	<br><span class="r_title">Python爬虫进阶二之PySpider框架安装配置</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="http://cuiqingcai.com/2083.html" title="自己动手实现山东大学QLSC_STU无线网络掉线后自动重连" target="_blank">
<img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/09/wallpaper_5265780-e1454442805684.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="自己动手实现山东大学QLSC_STU无线网络掉线后自动重连" />	<br><span class="r_title">自己动手实现山东大学QLSC_STU无线网络掉线后自动重连</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="http://cuiqingcai.com/1972.html" title="Python爬虫实战六之抓取爱问知识人问题并保存至数据库" target="_blank">
<img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/09/wallpaper_5265771.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="Python爬虫实战六之抓取爱问知识人问题并保存至数据库" />	<br><span class="r_title">Python爬虫实战六之抓取爱问知识人问题并保存至数据库</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="http://cuiqingcai.com/1707.html" title="Python中ValueError: invalid literal for int() with base 10 的实用解决办法" target="_blank">
<img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/wallpaper_5263464.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="Python中ValueError: invalid literal for int() with base 10 的实用解决办法" />	<br><span class="r_title">Python中ValueError: invalid literal for int() with base 10 的实用解决办法</span></a>
		</li>
	</ul>

<div class="relates">
<ul>
<li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/2443.html">Python爬虫进阶二之PySpider框架安装配置</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/2083.html">自己动手实现山东大学QLSC_STU无线网络掉线后自动重连</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/1972.html">Python爬虫实战六之抓取爱问知识人问题并保存至数据库</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/1707.html">Python中ValueError: invalid literal for int() with base 10 的实用解决办法</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/1319.html">Python爬虫入门八之Beautiful Soup的用法</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/1076.html">Python爬虫实战五之模拟登录淘宝并获取所有订单</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/1052.html">Python爬虫学习系列教程</a></li><li><i class="fa fa-minus"></i><a href="http://cuiqingcai.com/1001.html">Python爬虫实战四之抓取淘宝MM照片</a></li>
</ul></div></div>		</div>
						<a name="comments"></a>
<div id="SOHUCS" sid="990"></div> 
<script type="text/javascript"> 
(function(){ 
    var appid = 'cyse2vKeA'; 
    var conf = 'prod_e440e40ef998fc11db594040d810aefb'; 
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
        window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); 
    } else { 
        var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); 
    }})(); 
</script>            
<div id="ds-ssr" style="display:none">
				<nav id="comment-nav-above">
			<h1 class="assistive-text">Comment navigation</h1>
			<div class="nav-previous"><a href="http://cuiqingcai.com/990.html/comment-page-5#comments" >&larr; Older Comments</a></div>
			<div class="nav-next"></div>
		</nav>
		            <ol id="commentlist">
                		<li class="comment even thread-even depth-1" id="li-comment-1309">
			<article id="comment-1309" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">无可取代</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1309"><time pubdate datetime="2016-02-05T16:26:45+00:00">2016年2月5日 at 下午4:26</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>分享图片</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1310">
			<article id="comment-1310" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">无可取代</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1310"><time pubdate datetime="2016-02-05T16:26:15+00:00">2016年2月5日 at 下午4:26</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>asfsaff</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-1299">
			<article id="comment-1299" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">汝勿离</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1299"><time pubdate datetime="2016-02-04T14:33:37+00:00">2016年2月4日 at 下午2:33</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>忘了说了,我是把博主的代码改了一下,变成抓取35页的所有段子，然后删掉重复的后再写入文件。但现在基本上只能抓取10几页就出现我上面说的那个问题.</p>
</div>
				
			</article>
		<ul class="children">
		<li class="comment odd alt depth-2" id="li-comment-1306">
			<article id="comment-1306" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">静觅博客</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1306"><time pubdate datetime="2016-02-05T14:38:31+00:00">2016年2月5日 at 下午2:38</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>怪怪得，是不是匹配模式，没有用大小写忽略或者是忽略了某些空格之类的，糗百的页面改动比较频繁，正则可能不是太好用，不行的话你可以试试，pyquery，xpath，bs4等库来提取出来</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1297">
			<article id="comment-1297" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">汝勿离</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1297"><time pubdate datetime="2016-02-04T14:05:47+00:00">2016年2月4日 at 下午2:05</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>终于能评论了！我想问一下处理到某页时，re.findall(&#8230;.)这句代码后面的部分都不能执行了，该怎么办?<br />
比如,程序在处理第十四页的段子时,items = re.findall(pattern,page_code)这句代码以及以后的代码都不能执行了，程序直接卡住。我调试的时候发现pattern和page_code这两个变量的值都正确，但只要有re.findall(pattern,page_code)这句，程序就卡住了，想用if语句来跳过都不行，该怎么解决?</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="li-comment-1298">
			<article id="comment-1298" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">汝勿离</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1298"><time pubdate datetime="2016-02-04T14:01:34+00:00">2016年2月4日 at 下午2:01</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>.</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1217">
			<article id="comment-1217" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://weibo.com/kg24123' rel='external nofollow' class='url'>kg24123</a></span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1217"><time pubdate datetime="2016-02-01T10:22:21+00:00">2016年2月1日 at 上午10:22</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>&#8216;.*?&lt;a.*?(.*?).*?content&#8221;&gt;(.*?)<!--(.*?)-->.*?(.*?).*?<i>(.*?)</i>.*?&#8217;<br />
修改之后的正则表达式</p>
</div>
				
			</article>
		<ul class="children">
		<li class="comment byuser comment-author-cqcre bypostauthor odd alt depth-2" id="li-comment-1249">
			<article id="comment-1249" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://cuiqingcai.com/' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1249"><time pubdate datetime="2016-02-01T20:43:44+00:00">2016年2月1日 at 下午8:43</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>这频繁更新伤不起啊</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-1213">
			<article id="comment-1213" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">傲雪凌霜</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1213"><time pubdate datetime="2016-01-30T14:53:04+00:00">2016年1月30日 at 下午2:53</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>博主，您好。我本科也是山东大学的，今年刚读研一，很高兴在这里遇见您，您的这些篇教程让我学习爬虫过程中受益匪浅。有一个问题想请教您，就是在您写的正则表达式里面，那个“+”是什么意思，怎么用法。以及这是针对目前的糗百的html我写的一段正则表达式：&#8217;.*?<a href=".*?" rel="nofollow">.*?(.*?)<!--.*?-->.*?&#8217;+&#8217;.*?<img />(.*?)</a>.*?&#8217;                内容和题目都能爬下来，但是老是屏蔽不了图片的内容。求指点我在哪里出错了。感激不尽～</p>
</div>
				
			</article>
		<ul class="children">
		<li class="comment odd alt depth-2" id="li-comment-1214">
			<article id="comment-1214" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">xiaodan</span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1214"><time pubdate datetime="2016-01-30T18:37:15+00:00">2016年1月30日 at 下午6:37</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>+ is to connect two string,<br />
for the pattern is tooooo long.</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cqcre bypostauthor even depth-2" id="li-comment-1250">
			<article id="comment-1250" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://cuiqingcai.com/' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="http://cuiqingcai.com/990.html/comment-page-6#comment-1250"><time pubdate datetime="2016-02-01T20:44:12+00:00">2016年2月1日 at 下午8:44</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>＋号是代表匹配至少一个</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
            </ol>

				<nav id="comment-nav-below">
			<h1 class="assistive-text">Comment navigation</h1>
			<div class="nav-previous"><a href="http://cuiqingcai.com/990.html/comment-page-5#comments" >&larr; Older Comments</a></div>
			<div class="nav-next"></div>
		</nav>
		    </div>
			</div>
</div>
<aside class="sidebar">	
<div class="widget widget_text"><div class="textwidget"><div class="social">

<a href="http://weibo.com/u/2830678474" rel="external nofollow" title="新浪微博" target="_blank"><i class="sinaweibo fa fa-weibo"></i></a><a  href="http://t.qq.com/CQCcqc123456?preview" rel="external nofollow" title="腾讯微博" target="_blank"><i class="tencentweibo fa fa-tencent-weibo"></i></a><a class="weixin"><i class="weixins fa fa-weixin"></i><div class="weixin-popover"><div class="popover bottom in"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/img/weixin.gif" ></div></div></div></a>
<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=cqc@cuiqingcai.com" rel="external nofollow" title="Email" target="_blank"><i class="email fa fa-envelope-o"></i></a><a href="?feed=rss2" rel="external nofollow" target="_blank"  title="订阅本站"><i class="rss fa fa-rss"></i></a>
</div></div></div>

<div class="widget widget_archive"><div class="title"><h2>文章归档</h2></div>		<ul>
	<li><a href='http://cuiqingcai.com/date/2016/02'>2016年二月</a></li>
	<li><a href='http://cuiqingcai.com/date/2016/01'>2016年一月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/12'>2015年十二月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/11'>2015年十一月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/10'>2015年十月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/09'>2015年九月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/08'>2015年八月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/07'>2015年七月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/06'>2015年六月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/05'>2015年五月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/04'>2015年四月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/03'>2015年三月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/02'>2015年二月</a></li>
	<li><a href='http://cuiqingcai.com/date/2015/01'>2015年一月</a></li>
	<li><a href='http://cuiqingcai.com/date/2014/12'>2014年十二月</a></li>
	<li><a href='http://cuiqingcai.com/date/2014/11'>2014年十一月</a></li>
	<li><a href='http://cuiqingcai.com/date/2014/10'>2014年十月</a></li>
	<li><a href='http://cuiqingcai.com/date/2014/09'>2014年九月</a></li>
		</ul>
</div><div class="widget widget_links"><div class="title"><h2>热门专题</h2></div>
	<ul class='xoxo blogroll'>
<li><a href="http://cuiqingcai.com/1052.html" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5254665-e1424499272248.jpg"  alt="Python爬虫"  /> Python爬虫</a></li>
<li><a href="http://cuiqingcai.com/1479.html"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2016/02/23.jpg"  alt="PHP高级特性"  /> PHP高级特性</a></li>
<li><a href="http://cuiqingcai.com/2469.html" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2016/02/17.jpg"  alt="JavaScript"  /> JavaScript</a></li>
<li><a href="http://cuiqingcai.com/2467.html" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2016/02/15.jpg"  alt="OpenGL绘图"  /> OpenGL绘图</a></li>

	</ul>
</div>
<div class="widget widget_text"><div class="title"><h2>原创游戏</h2></div>			<div class="textwidget"><div class="taobaotextad">
<p style="
    margin-left: 20px;
    color: #00a67c;
">BallEscape丨博主开发的一款休闲益智虐心游戏 </p><p style="
    margin-left: 10px;
">
<a href="http://res.cuiqingcai.com/ballescape/">
<input type="button" value="了解更多" style="width: 310px; margin: 10px auto 0px; background-color: rgb(245, 138, 135); color: rgb(255, 255, 255); height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" onmouseover="this.style.backgroundColor='rgb(252, 125, 121)'" onmouseout="this.style.backgroundColor='#F58A87'"></a>
</p></div></div>
		</div><div class="widget d_postlist"><div class="title"><h2>猜你喜欢</h2></div><ul><li><a href="http://cuiqingcai.com/990.html" title="Python爬虫实战一之爬取糗事百科段子" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5228661.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战一之爬取糗事百科段子" /></span><span class="text">Python爬虫实战一之爬取糗事百科段子</span><span class="muted">2015-02-17</span><span class="muted">177评论</span></a></li>
<li><a href="http://cuiqingcai.com/1076.html" title="Python爬虫实战五之模拟登录淘宝并获取所有订单" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5226152.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战五之模拟登录淘宝并获取所有订单" /></span><span class="text">Python爬虫实战五之模拟登录淘宝并获取所有订单</span><span class="muted">2015-02-24</span><span class="muted">99评论</span></a></li>
<li><a href="http://cuiqingcai.com/1001.html" title="Python爬虫实战四之抓取淘宝MM照片" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5270641.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战四之抓取淘宝MM照片" /></span><span class="text">Python爬虫实战四之抓取淘宝MM照片</span><span class="muted">2015-02-20</span><span class="muted">98评论</span></a></li>
<li><a href="http://cuiqingcai.com/993.html" title="Python爬虫实战二之爬取百度贴吧帖子" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5265936.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战二之爬取百度贴吧帖子" /></span><span class="text">Python爬虫实战二之爬取百度贴吧帖子</span><span class="muted">2015-02-17</span><span class="muted">65评论</span></a></li>
<li><a href="http://cuiqingcai.com/1052.html" title="Python爬虫学习系列教程" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5254665-e1424499272248.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫学习系列教程" /></span><span class="text">Python爬虫学习系列教程</span><span class="muted">2015-02-21</span><span class="muted">56评论</span></a></li>
<li><a href="http://cuiqingcai.com/968.html" title="Python爬虫入门六之Cookie的使用" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5258536-1.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门六之Cookie的使用" /></span><span class="text">Python爬虫入门六之Cookie的使用</span><span class="muted">2015-02-15</span><span class="muted">48评论</span></a></li>
<li><a href="http://cuiqingcai.com/997.html" title="Python爬虫实战三之计算大学本学期绩点" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5265978.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战三之计算大学本学期绩点" /></span><span class="text">Python爬虫实战三之计算大学本学期绩点</span><span class="muted">2015-02-20</span><span class="muted">39评论</span></a></li>
<li><a href="http://cuiqingcai.com/1319.html" title="Python爬虫入门八之Beautiful Soup的用法" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/wallpaper_52546561.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门八之Beautiful Soup的用法" /></span><span class="text">Python爬虫入门八之Beautiful Soup的用法</span><span class="muted">2015-03-11</span><span class="muted">37评论</span></a></li>
<li><a href="http://cuiqingcai.com/947.html" title="Python爬虫入门三之Urllib库的基本使用" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5226849-1.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门三之Urllib库的基本使用" /></span><span class="text">Python爬虫入门三之Urllib库的基本使用</span><span class="muted">2015-02-13</span><span class="muted">27评论</span></a></li>
<li><a href="http://cuiqingcai.com/977.html" title="Python爬虫入门七之正则表达式" ><span class="thumbnail"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5270713.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门七之正则表达式" /></span><span class="text">Python爬虫入门七之正则表达式</span><span class="muted">2015-02-15</span><span class="muted">23评论</span></a></li>
</ul></div><div class="widget widget_text"><div class="title"><h2>我要投稿</h2></div>			<div class="textwidget"><div class="taobaotextad">
<p style="
    margin-left: 20px;
    color: #00a67c;
">想让自己的文章出现在这里吗?赶快注册投稿吧！</p><p style="
    margin-left: 10px;
">
<a href="http://cuiqingcai.com/wp-login.php?action=register">
<input type="button" value="点我投稿" style="width: 310px; margin: 10px auto 0px; background-color: rgb(245, 138, 135); color: rgb(255, 255, 255); height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" onmouseover="this.style.backgroundColor='rgb(252, 125, 121)'" onmouseout="this.style.backgroundColor='#F58A87'"></a>
</p></div></div>
		</div><div class="widget d_tag"><div class="title"><h2>标签云</h2></div><div class="d_tags"><a title="27个话题" href="http://cuiqingcai.com/tag/php">PHP (27)</a><a title="20个话题" href="http://cuiqingcai.com/tag/python">Python (20)</a><a title="16个话题" href="http://cuiqingcai.com/tag/%e7%88%ac%e8%99%ab">爬虫 (16)</a><a title="16个话题" href="http://cuiqingcai.com/tag/js">JS (16)</a><a title="11个话题" href="http://cuiqingcai.com/tag/opengl">OpenGL (11)</a><a title="10个话题" href="http://cuiqingcai.com/tag/html">HTML (10)</a><a title="8个话题" href="http://cuiqingcai.com/tag/jquery">jQuery (8)</a><a title="7个话题" href="http://cuiqingcai.com/tag/linux">Linux (7)</a><a title="7个话题" href="http://cuiqingcai.com/tag/winpcap">Winpcap (7)</a><a title="6个话题" href="http://cuiqingcai.com/tag/wordpress">WordPress (6)</a><a title="6个话题" href="http://cuiqingcai.com/tag/security">Security (6)</a><a title="4个话题" href="http://cuiqingcai.com/tag/git">Git (4)</a><a title="4个话题" href="http://cuiqingcai.com/tag/net">Net (4)</a><a title="3个话题" href="http://cuiqingcai.com/tag/java">Java (3)</a><a title="3个话题" href="http://cuiqingcai.com/tag/mysql">Mysql (3)</a><a title="2个话题" href="http://cuiqingcai.com/tag/cocos2d-x">Cocos2d-x (2)</a><a title="2个话题" href="http://cuiqingcai.com/tag/jsp">JSP (2)</a><a title="2个话题" href="http://cuiqingcai.com/tag/matlab">Matlab (2)</a><a title="2个话题" href="http://cuiqingcai.com/tag/bootstrap">Bootstrap (2)</a><a title="2个话题" href="http://cuiqingcai.com/tag/photoshop">Photoshop (2)</a><a title="2个话题" href="http://cuiqingcai.com/tag/css">CSS (2)</a><a title="1个话题" href="http://cuiqingcai.com/tag/json">Json (1)</a><a title="1个话题" href="http://cuiqingcai.com/tag/redis">Redis (1)</a><a title="1个话题" href="http://cuiqingcai.com/tag/less">LESS (1)</a><a title="1个话题" href="http://cuiqingcai.com/tag/nginx">Nginx (1)</a></div></div><div class="widget widget_links"><div class="title"><h2>友情链接</h2></div>
	<ul class='xoxo blogroll'>
<li><a href="http://www.anotherhome.net" target="_blank">Anotherhome</a></li>
<li><a href="http://zhouchenwen.com" rel="acquaintance" target="_blank">ColdCoder</a></li>
<li><a href="http://www.findspace.name" target="_blank">Findspace</a></li>
<li><a href="http://blog.hickwu.com/" target="_blank">Hick</a></li>
<li><a href="http://www.nopcn.com" target="_blank">nopcommerce</a></li>
<li><a href="http://wonderlee.me">Wonder’s Land</a></li>
<li><a href="http://www.atrail.cn/" target="_blank">从前以后</a></li>
<li><a href="http://www.superqq.com/">刚刚在线</a></li>
<li><a href="http://www.lvtao.net" target="_blank">吕滔博客</a></li>
<li><a href="http://www.fddcn.cn" target="_blank">奋斗的承诺</a></li>
<li><a href="http://www.zuilizhi.net/" target="_blank">最励志网</a></li>
<li><a href="http://www.lishengcn.cn/" target="_blank">李胜的脚步</a></li>
<li><a href="http://liaoyuming.cn" rel="acquaintance" target="_blank">永远站</a></li>
<li><a href="http://www.hubwiz.com" target="_blank">汇智网</a></li>
<li><a href="http://www.zoeys.cn/" target="_blank">糊糊</a></li>
<li><a href="http://www.leyle.com/" target="_blank">遗落岛</a></li>

	</ul>
</div>
<div class="widget widget_text"><div class="title"><h2>休闲一下</h2></div>			<div class="textwidget"><div class="taobaotextad">
<p style="
    margin-left: 20px;
    color: #00a67c;
">累了吧？玩个游戏休息一下吧 </p><p style="
    margin-left: 10px;
">
<a href="http://res.cuiqingcai.com/2048">
<input type="button" value="放松一下" style="width: 310px; margin: 10px auto 0px; background-color: rgb(245, 138, 135); color: rgb(255, 255, 255); height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" onmouseover="this.style.backgroundColor='rgb(252, 125, 121)'" onmouseout="this.style.backgroundColor='#F58A87'"></a>
</p></div></div>
		</div><div class="widget widget_text"><div class="title"><h2>新浪微博</h2></div>			<div class="textwidget"><iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=1&isFans=1&uid=2830678474&verifier=7468dc7b&dpc=1"></iframe></div>
		</div><div class="widget widget_text"><div class="title"><h2>精品推荐</h2></div>			<div class="textwidget"><div class = "taobaotextad">
<script type="text/javascript">
var cpro_id="u1974136";
(window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id]={at:"3",rsi0:"338",rsi1:"330",pat:"6",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"0",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"",rss2:"#00a67c",titSU:"0",ptbg:"70",piw:"130",pih:"80",ptp:"0"}
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
</div></div>
		</div></aside></section>
<footer class="footer">
    <div class="footer-inner">
        <div class="copyright pull-left">
         <a href="http://cuiqingcai.com " title="静觅">静觅</a> 版权所有丨采用<a href="http://yusi123.com/"> 欲思 </a>主题丨基于<a href="http://cn.wordpress.org/" title="WordPress"> WordPress </a>构建   © 2015丨托管于 <a rel="nofollow" target="_blank" href="http://www.aliyun.com/">阿里云主机</a> & <a rel="nofollow" target="_blank" href="http://www.qiniu.com/">七牛云存储 </a>丨鲁ICP备14030596号
		 <div>
			<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253486800'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1253486800%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
		 </div>
		</div>
        
    </div>
</footer>

<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/cuiqingcai.com\/wp-admin\/admin-ajax.php","post_id":"990"};
/* ]]> */
</script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/themes/Yusi/js/jquery.js?ver=1.0'></script>
<script>with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date()/36e5)];</script><!-- xuanfu -->
 <script type="text/javascript">
    /*300*25 创建于 2015-02-23*/
    var cpro_id = "u1959047";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/s.js" type="text/javascript"></script>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F3ef185224776ec2561c9f7066ead4f24' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>
<!-- Dynamic page generated in 0.357 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-02-11 23:13:55 -->

<!-- super cache -->